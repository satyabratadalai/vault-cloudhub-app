pipeline {
    agent any
    environment {
        // Include all necessary --add-opens options
        MAVEN_OPTS = "--add-opens=java.base/sun.net.www.protocol.jar=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.lang=ALL-UNNAMED"
    }
    stages {
        stage('Build') {
            steps {
                withMaven(maven: 'maven-3.6.3', mavenSettingsConfig: '3802749b-765f-4b02-86ab-bcf94c417beb') {
                    sh 'mvn clean package'
                }
        }
}
        stage('deploy') {

            steps {
                withMaven(maven: 'maven-3.6.3', mavenSettingsConfig: '3802749b-765f-4b02-86ab-bcf94c417beb') {
                    sh 'mvn clean deploy -DmuleDeploy'
                }
        
    }
}
}
}
